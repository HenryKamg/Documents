# 测试设计

对 EayunStack 的性能测试主要包括两个方面：EayunStack 本身及其创建的云主机的性能。

EayunStack 本身的性能，除了节点机器的硬件和网络性能之外，还需要对 EayunStack 各个组件的负载进行测试，如并发创建大量云主机等。

而更为关注的是云主机的性能。用户最终使用的是云主机，因此要对云主机的性能进行充分的测试。


## EayunStack 环境性能

* **硬件性能**: 硬件性能主要包括网络和硬盘的性能。

* **组件性能**: EayunStack 是一个各个服务联合运作的庞大系统。各个组件相互协调运作，因此，要保证在较大压力下，各个组件能够正常运作，需要对各个组件进行性能测试。

  需要测试的组件包括：Nova、Cinder、Glance、Neutron 和 Keystone。

## 云主机性能

云主机运行在计算节点上。

云主机的性能主要包括**存储**的性能和**网络**的性能。

云主机的网络由 EayunStack 的 Neutron 服务提供；云主机的磁盘可以选择使用 Ceph 类型或 Eqlx 类型的存储。

* **存储性能**: 存储性能的测试主要包括对磁盘的读、写分别进行测试。使用的工具为 fio。

  对云主机的磁盘进行测试时，要分别测试 Ceph 类型和 Eqlx 类型的存储。

* **网络性能**: 网络性能的测试主要包括 TCP 和 UDP 的测试，包括吞吐量、带宽、丢包率等。使用的工具为 iperf。

  对云主机的网络进行测试时，将测试 2 台云主机之间（其中一台为服务器端，另一台为客户端）通信时云主机获得的网络性能，以及 2N 台主机之间（其中 N 台为服务器端，N 台为客户端，二者通信方式为一对一）并发通信时云主机获得的网络性能。

