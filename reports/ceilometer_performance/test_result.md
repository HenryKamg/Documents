# Ceilometer 性能测试的执行

## 测试人员

|参与内容|负责人|
|--------|------|
|创建测试租户和虚拟机|周嫣然|
|EayunStack 1.0.1 Ceilometer 性能测试||
|EayunStack 1.1 Ceilometer 性能测试||
|清理测试资源|周嫣然|
|整理测试数据||
|输出测试报告|周嫣然|

## EayunStack 1.0.1 Ceilometer 性能

> **EayunStack 1.0.1 Ceilometer 性能测试结果**：

|进程数|请求数|数据库 CPU 使用率 (%)|每秒查询次数|实际时间|用户 CPU 时间|系统 CPU 时间|运行状态|
|------|------|---------------------|------------|--------|-------------|-------------|--------|
|10|500|240|80|0m32.222s|0m6.217s|0m13.997s|正常运行|
|10|1000|240|80|1m4.363s|0m11.786s|0m30.382s|正常运行|
|10|2000|||2m10.401s|0m21.915s|0m55.214s|正常运行|
|10|5000|||5m32.539s|0m52.983s|2m17.202s|正常运行|
|12|500|240|70|0m37.257s|0m6.350s|0m14.567s|正常运行|
|12|5000||||||失败|
|15|500|||0m32.234s|0m6.462s|0m15.769s|正常运行|
|15|1000|||1m12.402s|0m11.922s|0m31.259s|出现个别错误|
|15|5000||||||失败|

## EayunStack 1.1 Ceilometer 性能

> **EayunStack 1.1 Ceilometer 性能测试结果**：

|进程数|请求数|数据库 CPU 使用率 (%)|每秒查询次数|实际时间|用户 CPU 时间|系统 CPU 时间|运行状态|
|------|------|---------------------|------------|--------|-------------|-------------|--------|
|10|500|90|30|1m24.279s|0m6.687s|0m14.572s|正常运行|
|10|1000|90|30|2m48.376s|0m12.464s|0m33.157s|正常运行|
|10|2000|||5m48.603s|0m24.402s|0m59.219s|正常运行|
|12|500|90|30|1m18.429s|0m7.000s|0m15.376s|正常运行|
|15|500|120|38|1m6.270s|0m7.048s|0m18.579s|正常运行|
|100|500|140|45|1m10.601s|0m8.674s|0m26.054s|正常运行|
|150|500|||1m9.453s|0m9.997s|0m46.954s|正常运行|
|150|5000|||12m33.384s|1m15.528s|4m38.861s|正常运行|
|150|10000|||20m9.368s|2m36.131s|8m51.315s|正常运行|

## EayunStack 1.1 对 Mongo 数据库和 API 优化后的性能

> **使用 Mongo 复制集(数据库未添加索引)后的性能测试结果**：

|进程数|请求数|数据库 CPU 使用率 (%)|每秒查询次数|实际时间|用户 CPU 时间|系统 CPU 时间|运行状态|
|------|------|---------------------|------------|--------|-------------|-------------|--------|
|10|500|470|12|3m1.473s|0m6.665s|0m15.536s|正常运行|
|10|1000|500|18|5m58.611s|0m12.174s|0m30.628s|正常运行|
|10|2000|540|18|11m53.871s|0m23.808s|1m1.509s|正常运行|
|12|500|650|20|2m51.403s|0m6.609s|0m16.077s|正常运行|
|15|500|||2m17.377s|0m6.879s|0m16.259s|正常运行|
|100|500|||2m12.436s|0m8.359s|0m26.891s|正常运行|
|150|500|1100|26|2m19.654s|0m9.342s|0m30.986s|正常运行|
|150|5000|1100|30|20m14.609s|1m14.400s|4m31.916s|正常运行|
|150|10000||||||正常运行|

> **使用 Mongo 复制集(数据库添加索引)和 Apache 重构 API 后的性能测试结果**：

|进程数|请求数|数据库 CPU 使用率 (%)|每秒查询次数|实际时间|用户 CPU 时间|系统 CPU 时间|运行状态|
|------|------|---------------------|------------|--------|-------------|-------------|--------|
|10|500|20|170|0m17.187s|0m6.465s|0m12.813s|正常运行|
|10|1000|20|170|0m33.214s|0m12.341s|0m25.537s|正常运行|
|10|2000|20|170|1m4.225s|0m23.290s|0m50.090s|正常运行|
|12|500|20|170|0m16.209s|0m6.681s|0m13.625s|正常运行|
|15|500|20|170|0m15.182s|0m7.220s|0m16.377s|正常运行|
|100|500|30|220|0m14.514s|0m9.514s|0m37.987s|正常运行|
|150|500|30|220|0m16.896s|0m9.998s|0m52.945s|正常运行|
|150|5000|40|180|2m26.475s|1m26.409s|9m22.017s|正常运行|
|150|10000|47|220|4m19.249s|2m45.191s|14m33.363s|正常运行|

> ###### 备注：
> Apache 重构 API 主要用于添加 API 多进程处理，Mongodb 复制集用于数据库高可用，数据库添加索引用于提升数据库性能，可以快速访问数据库中的特定信息。
