# QoS功能介绍
1.qos能够干什么

qos能够实现限制路由或者端口速度，是一个neutron的扩展，qos和linux内部tc传输单位一致都是 Bytes per second。

2.qos中的一些要素


1）QoS：最基本元素，通过定义目标类型和目标 id 实现与路由或者端口的绑定，定义方向表示限制的是什么方向的流量，定义流量的总大小以及总爆发等控制要素。创建一个QoS都会默认生成一个QoS Queue，且这个Queue是优先级最低，用以归类未分类的流量。

2）QoS Queue：QoS 队列，每个队列可以定义保证带宽大小以及最高带宽大小，还可以定义 burst 和 cburst 等爆发传输量的大小。队列可以有子队列，没有子队列的队列才可以绑定 QoS Filter。另外队列有优先级，优先级定义了相同层级（同一父队列，或者同处于最顶级）的队列获取上层多余带宽的优先级。优先级相同时按照保证带宽大小的比例分配多余带宽。默认队列的最高带宽大小总是整个 QoS 的带宽大小

3）QoS Filter：过滤器，使用目标端口，源端口，目标地址，源地址，协议等要素来归类相应的流量，符合该分类的流量会流向绑定该过滤器的队列之中，从而实现对符合某些条件的网络流量的控制。在同一个队列中的过滤器同样具有优先级并且是非重复的值，但在不同队列中的过滤器的优先级可以相同的，表示流量匹配的优先顺序，未归类的流量会使用 QoS 中的默认队列进行传输。

三个要素之间的关系可以概括成为，一个QoS定义了总速度，QoS可以有多个队列，这些队列共享QoS的速度且总和不能超过QoS的总速度；每个没有子队列的队列又可以包含多个过滤器。

注意：由于归类过程发生在具体使用物理设备进行传输之前，即已经在路由选择之后，在路由器上的 filter 需要注意归类时对于 NAT 的地址需要使用转换后的地址来进行表示

3.其他要素说明

1）rate：限定速率

2）ceil：可借用到的速率

3）burst：能够使用ceil速率进行传输的数据量的大小(不清楚的情况最好不要设置)

4）cburst：能够使用设备物理速度进行传输的数据量的大小
