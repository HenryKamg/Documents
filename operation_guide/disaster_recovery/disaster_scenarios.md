# 灾难场景

```
* 场景N：

* 故障等级：

* 场景描述：

* 恢复方案：
```

## 网络故障

#### 场景 No.1：外部网络故障

* 故障等级：

* 场景描述：

  EayunStack环境所连接到的机房外部网络故障，导致 Controller 节点无法通过外部网络与公网进行通信。

* 恢复方案：

===

#### 场景 No.2：管理网络故障

* 故障等级：

* 场景描述：

  EayunStack管理网络故障，各节点之间无法通过管理网络进行通信。
  
* 恢复方案：

  

===

#### 场景 No.3：租户网络故障

* 故障等级：

* 场景描述：

  EayunStack租户网络故障，Controller、Compute 节点之间无法通过租户网络进行通信。

* 恢复方案：


===

#### 场景 No.4：存储网络故障

* 故障等级：

* 场景描述：

  EayunStack存储网络故障，Controller、Compute、Ceph-osd 节点之间无法通过存储网络进行通信。

* 恢复方案：


===

#### 场景 No.5：Ceph Cluster网络故障

* 故障等级：

* 场景描述：

  EayunStack Ceph Cluster 网络故障，Ceph-osd 节点之间无法通过 Ceph Cluster 网络进行通信。

* 恢复方案：


## 服务器故障

#### 场景：Controller 节点宕机

* **场景 No.6：一台 Controller 节点宕机**

  * 故障等级：

  * 场景描述：
  
    环境中一台 Controller 节点宕机，Controller 节点上的相关服务均有 HA 机制，不会造成环境不可用。

  * 恢复方案：
  
* **场景 No.7：N/2台 Controller 节点宕机（N为Controller节点总数）**

  * 故障等级：

  * 场景描述：

    环境中N/2台 Controller 节点宕机（N为Controller节点总数），会造成集群服务停止。
  
  * 恢复方案：

* **场景 No.8：所有 Controller 节点宕机**

  * 故障等级：

  * 场景描述：
  
    环境中所有 Controller 节点宕机，会造成环境不可用。
  
  * 恢复方案：


===

#### 场景： Compute 节点宕机

* **场景 No.9：Compute 节点宕机，集群中可用资源可满足该节点上的 instance 迁移到其它节点**

  * 故障等级：

  * 场景描述：
  
    环境中有 Compute 节点宕机，集群中可用资源可满足该节点上的 instance 迁移到其它节点。

  * 恢复方案：

* **场景 No.10：Compute 节点宕机，集群中可用资源不能满足该节点上的 instance 迁移到其它节点**

  * 故障等级：

  * 场景描述：
  
    环境中有 Compute 节点宕机，集群中可用资源不能满足该节点上的 instance 迁移到其它节点。

  * 恢复方案：


===

#### 场景：Ceph-osd 节点宕机

* **场景 No.11：小于三台 Ceph-osd 节点宕机**

  * 故障等级：

  * 场景描述：
  
    环境中有小于三台 Ceph-osd 节点宕机，目前一份数据会拷贝两份分别存放在另外两个 Ceph-osd 节点上，因此小于三台 Ceph-osd 节点宕机不会造成数据丢失。

  * 恢复方案：

* **场景 No.12：大于或等于三台 Ceph-osd 节点宕机**

  * 故障等级：

  * 场景描述：
  
    环境中有大于或等于三台 Ceph-osd 节点宕机，目前一份数据会拷贝两份分别存放在另外两个 Ceph-osd 节点上，因此大于或等于三台 Ceph-osd 节点宕机可能会造成数据丢失。

  * 恢复方案：


===

#### 场景 No.13：Mongo 节点宕机

* 故障等级：

* 场景描述：

  Mongo 节点宕机，造成 ceilometer 服务不可用。

* 恢复方案：


===

#### 场景 No.14：Fuel 节点宕机

* 故障等级：

* 场景描述：

  Fuel 节点宕机，无法向 OpenStack 节点提供 NTP 服务。

* 恢复方案：


## 集群故障

#### 场景 No.15：MySQL 集群故障

* 故障等级：

* 场景描述：

  MySQL 集群故障，导致无法提供数据库服务。

* 恢复方案：


===

#### 场景 No.16：RabbitMQ 集群故障

* 故障等级：

* 场景描述：

  RabbitMQ 集群故障，导致无法提供 MQ 服务。

* 恢复方案：


===

#### 场景：Ceph 集群故障

* **场景 No.17：Ceph 集群故障，数据未丢失**

  * 故障等级：

  * 场景描述：
  
    Ceph 集群故障，未造成数据丢失。

  * 恢复方案：

* **场景 No.18：Ceph 集群故障，数据丢失**

  * 故障等级：

  * 场景描述：
  
    Ceph 集群故障，造成数据丢失，需要恢复数据。

  * 恢复方案：


