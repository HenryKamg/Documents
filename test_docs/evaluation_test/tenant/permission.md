# 权限管理

## 创建用户角色

* 前提：

  以 Admin 身份执行。

* 操作：

  1. 登录到 Controller 节点；
  1. 执行创建角色命令：

    ```
    (controller)# keystone role-create --name eayun_member
    ```

* 预期结果：

  角色创建成功，为所创建的角色分配 ID 并显示角色信息：

    ```
    +----------+----------------------------------+
    | Property |              Value               |
    +----------+----------------------------------+
    |    id    | 3724d8975ff7441c910da9d5afe4a8e2 |
    |   name   |           eayun_member           |
    +----------+----------------------------------+
    ```

## 为用户分配角色

* 前提：

  * 已经创建了用户；
  * 环境中有可用的角色；
  * 以 **Admin** 身份登录到 OpenStack 的管理界面。

* 操作：

  1. 点击左侧导航栏的 【Identity】 选项卡，点击 【Projects】 子选项卡；
  1. 右侧将显示 Projects 列表，选择一个 Project，点击 【Actions】 中的 【Modify Users】；
  1. 在弹出的 【Edit Project】 对话框中，在 【Project Members】 标签下，在分栏显示的右侧栏，即 "Project Members" 中，找到要分配角色的用户；
  1. 点击下拉按钮，下拉列表中将显示所有可分配的角色，勾选角色 "_member_"，点击对话框右下角的 【Save】 按钮。

* 预期结果：

  * 成功为用户分配角色；
  * 用户在该租户中拥有 "_member_" 角色的权限。

> ###### 说明：
> 用户的角色是针对用户在一个租户中而言的，无发对某个独立的用户分配角色。

## 删除用户角色

* 前提：

  以 Admin 身份执行。

* 操作：

  1. 登录到 Controller 节点；
  1. 执行命令，将角色删除：

    ```
    (controller)# keystone role-delete ROLE_ID
    ```

* 预期结果：

  * 成功将角色删除；
  * 该角色将从分配了该角色的用户中删除。

> #### 说明：
> * 不同角色的权限是通过配置文件设置的，创建了角色后，需要对 <code>/etc/{COMPONENT}/policy.json</code> 文件进行相应的修改，重启服务后生效。
