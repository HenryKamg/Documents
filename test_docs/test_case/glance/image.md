# 验证 Glance 的镜像功能

|内容编号|内容名称|
|--------|--------|
|01|镜像|


|测试编号|测试目的|操作|预期结果|实际结果|备注|Rally/Tempest/None|
|--------|--------|----|--------|--------|----|------------------|
|01040101|测试 glance image-list 命令的功能|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Images】选项，查看右侧列表。</li></ol></li></ul><ul><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 list_images.yaml；</li><li>执行测试命令 <code>rally task start list_images.js</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>显示该 project 中的所有 image 的列表</li></ul></li></ul><ul><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||列出镜像|Rally:</br>list_images.yaml|
|01040102|测试本地上传 QCOW2 镜像的功能|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Images】选项，点击 【Create Imange】 按钮；</li><li>在弹出的 【Create An Image】 窗口中，填写 Name，选择 Image Source 为 Image File，点击选择需要上传的本地镜像文件；</li><li>选择 Format 为 QCOW2，其他设置保持默认；</li><li>点击 【Create Image】 按钮，上传镜像</li></ol></li></ul><ul><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 create-and-list-image.yaml；</li><li>执行测试命令 <code>rally task start create-and-list-image.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>镜像上传成功</li><li>镜像的状态变化为 Queued -> Spaning -> Active</li><li>列表中显示新建的镜像的信息</li></ul></li></ul><ul><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||创建并列出镜像，需要针对不同类型的镜像写测试用例|Rally:</br>create-and-list-image.yaml|
||测试通过 URL 上传 QCOW2 镜像的功能|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Images】选项，点击 【Create Imange】 按钮；</li><li>在弹出的 【Create An Image】 窗口中，填写 Name，选择 Image Source 为 Image Location，在 Image Location 处填写镜像的 URL，选择 Format 为 QCOW2，其他设置保持默认；</li><li>点击 【Create Image】 按钮，上传镜像</li></ol></li></ul><ul><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 create-and-list-image.yaml；</li><li>执行测试命令 <code>rally task start create-and-list-image.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>镜像上传成功</li><li>镜像的状态变化为 Queued -> Spaning -> Active</li><li>列表中显示新建的镜像的信息</li></ul></li></ul><ul><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>|||Rally:</br>create-and-list-image.yaml|
||测试本地上传 ISO 镜像的功能||||||
||测试通过 URL 上传 ISO 镜像的功能||||||
||测试上传 AMI 镜像的功能||||||
||测试编辑镜像的功能|||||None|
|01040103|测试 glance image-delete (删除镜像) 命令的功能|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Comput】 子选项卡，展开；</li><li>点击 【Images】 选项，在右侧选择所需要删除的镜像，点击 【Actions】 的下拉图标，点击 【Delete Image】；</li><li>在弹出的 【Confirm Delete Image】 窗口中，点击 【Delete Image】 按钮。</li></ol></li></ul><ul><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 create-and-delete-image.yaml；</li><li>执行测试命令 <code>rally task start create-and-delete-image.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>镜像成功删除，出现 Success 的提示信息</li><li>镜像列表中不再显示被删除的镜像的信息</li></ul></li></ul><ul><li>CLI:<ul><li>Rally 测试成功|||Rally:</br>create-and-delete-image.yaml|
|01040104|测试从镜像启动实例|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Images】 选项，选择一个新创建的镜像，点击 【Actions】 中的 【Launch】；</li><li>在弹出的 【Launch Instance】 窗口中的 Details 标签中，输入 Instance Name，选择 Flavor 为 m1.tiny，Instance Count (实例数量) 为 1，其他配置保持默认；</li><li>点击 Networking 标签，选择为实例分配的网络；</li><li>其他标签的配置保持默认，点击 【Launch】 按钮。</li></ol></li></ul><ul><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 create-image-and-boot-instances.yaml；</li><li>执行测试命令 <code>rally task start create-image-and-boot-instances.yaml。</li></ol></li></ul>|<ul><li>UI:<ul><li>镜像创建成功，镜像的状态变化为 Queued -> Spaning -> Active</li><li>实例创建成功，实例的状态变化为 Build -> Active，任务变化为 Spawning -> None</li><li>选择所创建的实例，点击 【Actions】 中的 【Console】，打开实例控制台，所创建的实例的操作系统与所上传的镜像相符</li></ul></li></ul><ul><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||与 nova/server.md 中稍有不同|Rally:</br>create-image-and-boot-instances.yaml|
