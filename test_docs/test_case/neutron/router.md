# 验证 Neutron 的 router 部分

|内容编号|内容名称|
|--------|--------|
|02|路由|


|测试编号|测试目的|操作|预期结果|实际结果|备注|Rally/Tempest/None|
|--------|--------|----|--------|--------|----|------------------|
|01010201|创建并列出路由|<ul><li>UI:<ol><li>登录dashboard，点击左侧导航栏中的的 【Project】，展开选项，点击 【Network】 子选项，选择 【Routers】 子选项，进入路由界面；</li><li>点击 【Create Routes】 按钮，在弹出的 【Create Router】 窗口中，填写 Router Name 为 "router1"，点击 【Create Router】 按钮。</li></ol></li><li>CLI:<ol><li>登录rally测试服务；</li><li>使用rally测试文档create_and_list_routers.yaml；</li><li>执行测命令```rally task start create_and_list_routers.yaml```。</li></ol></li></ul>|<ul><li>UI:<ul><li>能够成功创建路由，在路由表项中查看到全部路由，并看到新创建的路由。</li></ul></li><li>CLI:<ul><li>rally测试成功。</li></ul></li></ul>||执行 50 次，每次并行执行 5 个测试|Rally:</br>create_and_list_routers.yaml|
|01010202|删除路由|<ul><li>UI:<ol><li>登录 dashboard，点击左侧导航栏中的的 【Project】，展开选项，点击 【Network】 子选项，选择 【Routers】 子选项，进入路由界面；</li><li>点击要删除的路由，在选框中勾选，点击右上角处的 【Delete Router】 按钮；</li><li>在弹出的 【Confirm Delete Router】 窗口中，点击窗口下方的 【Delete Router】 按钮。</li></ol></li><li>CLI:<ol><li>登录rally测试服务器；</li><li>使用rally测试文档create_and_delete_routers.yaml；</li><li>执行测试命令```rally task start create_and_list_routers.yaml```。</li></ol></li></ul>|<ul><li>UI:<ul><li>能够成功删除路由</li></ul></li><li>CLI:<ul><li>rally测试成功。</li></ul></li></ul>||执行 30 次，每次并行执行 5 个测试|Rally:</br>create_and_delete_routers.yaml|
|01010203|设置路由的网关|<ul><li>UI:<ol><li>登录 dashboard，点击左侧导航栏中的的 【Project】，展开选项，点击 【Network】 子选项，选择 【Routers】 子选项，进入路由界面；</li><li>在右侧的路由列表中选择一个没有设置网关的路由，点击 【Actions】 中的 【Set Gateway】；</li><li>在弹出的 【Set Gateway】 窗口中，选择 External Network，点击窗口下方的 【Set Gateway】 按钮。</li></ol></li><li>CLI:<ol><li>登录 Controller 节点；</li><li>执行命令 <code>neutron net-list</code> 和 <code>neutron router-list</code>，获取要设置网关的路由 ID 和外网 ID；</li><li>执行命令，设置网关：<code>neutron router-gateway-set [ROUTER_ID] [EXTERNEL_ID]</code>。</li></ol></li></ul>|<ul><li>UI:<ul><li>路由的网关设置成功</li><li>【Actions】 中的操作变为 【Clear Gateway】</li></ul></li><li>CLI:<ul><li>路由网关设置成功，有成功提示信息</li></ul></li></ul>|||None|
|01010204|清除路由的网关|<ul><li>UI:<ol><li>登录 dashboard，点击左侧导航栏中的的 【Project】，展开选项，点击 【Network】 子选项，选择 【Routers】 子选项，进入路由界面；</li><li>在右侧的路由列表中选择一个设置了网关的路由，点击 【Actions】 中的 【Clear Gateway】；</li><li>在弹出的 【Confirm Clear Gateway】 窗口下方，点击 【Clear Gateway】 按钮。</li></ol></li><li>CLI:<ol><li>登录 Controller 节点；</li><li>执行命令，清除路由网关：<code>neutron router-gateway-clear [ROUTER_ID]</code>。</li></ol></li></ul>|<ul><li>UI:<ul><li>路由的网关被清除</li><li>【Actions】 中的操作变为 【Set Gateway】</li></ul></li><li>CLI:<ul><li>清除路由网关成功，有相关成功提示</li></ul></li></ul>|||None|
|01010205|修改路由|<ul><li>UI:<ol><li>登录 dashboard，点击左侧导航栏中的的 【Project】，展开选项，点击 【Network】 子选项，选择 【Routers】 子选项，进入路由界面；</li><li>选择名称为 "router1" 的路由，点击 【Actions】 中的 【Edit Router】；</li><li>在弹出的 【Edit Router】 窗口中，修改路由名称为 "router2"，Admin State 选择为 Down，点击窗口下方的 【Save Changes】。</li></ol></li><li>CLI:<ol><li>登录rally测试服务器；</li><li>使用rally测试文档create_and_update_routers.yaml；</li><li>执行测试命令```rally task start create_and_update_routers.yaml```</li></ol></li></ul>|<ul><li>UI:<ul><li>能够对路由的接口修改成功</li><li>路由的 Admin State 显示为 DOWN</li></ul></li><li>CLI:<ul><li>rally测试成功</li></ul></li></ul>||执行 10 次，每次并行执行 5 个测试|Rally:</br>create_and_update_routers.yaml|
