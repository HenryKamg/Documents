# 验证 Nova 的 server 部分

|内容编号|内容名称|
|--------|--------|
|03|虚拟机|


|测试编号|测试目的|操作|预期结果|实际结果|备注|Rally/Tempest/None|
|--------|--------|----|--------|--------|----|------------------|
|01050301|从镜像启动一台实例|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项卡；</li><li>点击 【Launch Instance】 按钮；</li><li>在弹出的 【Launch Instance】 窗口中，在 Details 标签下，填写 Instance Name，选择 Flavor 为 m1.tiny；</li><li>选择 Instance Boot Source 为 "Boot from image"，选择 Image Name 为启动的镜像；</li><li>在 Networking 标签下，为实例选择网络；</li><li>点击窗口下方的 【Launch】 按钮，启动实例。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot.yaml；</li><li>执行测试命令 <code>rally task start boot.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例创建成功，实例以所选择的镜像和类型启动</li><li>实例的状态变化为 Build -> Active，Task 状态变化为 Spawning -> None，Power State 的变化为 No State -> Running</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 20 次，每次执行 1 个测试|Rally:</br>boot.yaml|
|01050302|使用一个大的镜像创建一台小的实例||||需要修改 flavor 为很小，image name 为很大|Rally:</br>boot.yaml|
|01050303|从卷启动一台实例|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击【Instances】 选项卡，点击 【Launch Instance】 按钮；</li><li>在弹出的 【Launch Instance】 窗口中，在 Details 标签下，填写 Instance Name，选择 Flavor 为 "m1.tiny"，输入 Instance Count 为 "1"，选择 Instance Boot Source 为 "Boot from volume"，在下方出现的 Volume 中选择卷；</li><li>在 Networking 标签下选择分配的网络后，点击 【Launch】 按钮。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-from-volume.yaml；</li><li>执行测试命令 <code>rally task start boot-from-volume.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例启动成功</li><li>状态变化为 Build -> Active</li><li>任务状态变化为 Block Storage Mapping -> Spawning -> None</li><li>点击 【Volumes】 选项卡，看到用于启动该实例的卷显示为 "Attached to INSTANCE_NAME on /dev/vda"</li><li>不能使用该卷继续启动实例</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||<ul><li>同时执行创建 "eqlx" 和 "rbd" 卷的测试用例</li><li>执行 10 次，每次并行执行 2 个测试</li></ul>|Rally:</br>boot-from-volume.yaml|
|01050304|从实例快照(非卷的快照)中启动一台实例|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击【Instances】 选项卡，点击 【Launch Instance】 按钮；</li><li>在弹出的 【Launch Instance】 窗口中，在 Details 标签下，填写 Instance Name，选择 Flavor 为 "m1.tiny"，输入 Instance Count 为 "1"，选择 Instance Boot Source 为 "Boot from snapshot"，在下方出现的 Instance Snapshot 中选择快照；</li><li>在 Networking 标签下选择分配的网络后，点击 【Launch】 按钮。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot.yaml；</li><li>执行测试命令 <code>rally task start boot.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例启动成功</li><li>状态变化为 Build -> Active</li><li>任务状态变化为 Spawning -> None</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||<ul><li>执行 20 次，每次执行 1 个测试</li><li>所使用的镜像是从实例创建的快照</li></ul>|Rally:</br>boot_from_snapshot.yaml|
|01050305|测试 nova list 命令的功能|<ul><li>UI:<ol><li>使用 admin 登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项卡；</li><li>点击左侧导航栏的 【Admin】，展开选项卡；</li><li>点击 【System】 子选项卡，展开；</li><li>点击 【Instances】 选项卡。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-and-list.yaml；</li><li>执行测试命令 <code>rally task start boot-and-list.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>列出了该 project 下该用户所拥有的所有实例</li><li>列出了所有 project 的实例（管理员能够看到所有 project 的实例）</ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 50 次，每次并行执行 2 个测试|Rally:</br>boot-and-list.yaml|
|01050306|测试删除实例的功能|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项卡；</li><li>在右侧的实例列表中选择所要删除的实例，点击 【Actions】，点击 【Teminate Instance】；</li><li>在弹出的 【Confirm Terminate Instance】 窗口中，点击 【Teminate Instance】 按钮。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-and-delete.yaml；</li><li>执行测试命令 <code>rally task start boot-and-delete.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>成功删除实例，有 Success 的信息提示</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，每次并行执行 2 个测试|Rally:</br>boot-and-delete.yaml|
|01050307|测试删除 Status 为 "Error" 的实例||||什么情况下，Error 实例不能正常删除？||
|01050308|测试在同一个 availability zone 中迁移实例|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Admin】，展开选项卡；</li><li>点击 【System】 子选项卡，展开；</li><li>点击【Instances】 选项卡；</li><li>选择所要迁移的实例，点击 【Actions】 中的 【Migrate Instance】；</li><li>在弹出的 【Confirm Migrate Instance】 窗口中，点击 【Migrate Instance】 按钮；</li><li>迁移结束后，需要手动确认迁移，即点击 【Actions】 中的 【Confirm Resize/Migrate】 按钮，完成迁移。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-and-migrate.yaml；</li><li>执行测试命令 <code>rally task start boot-and-migrate.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例开始迁移，状态变化为 Resize/Migrate -> Confirm or Revert Resize/Migrate</li><li>确认完成迁移后，看到实例迁移到另一台主机上，Host 中显示主机发生变化</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，每次并行执行 2 个测试|Rally:</br>boot-and-migrate.yaml|
|01050309|测试在同一个 availability zone 中恢复迁移实例|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Admin】，展开选项卡；</li><li>点击 【System】 子选项卡，展开；</li><li>点击【Instances】 选项卡；</li><li>选择所要迁移的实例，点击 【Actions】 中的 【Migrate Instance】；</li><li>在弹出的 【Confirm Migrate Instance】 窗口中，点击 【Migrate Instance】 按钮；</li><li>迁移后点击 【Actions】 中的 【Revert Resize/Migrate】 恢复，取消迁移。</li></ol></li><li>CLI:<ol><li>登录到 Controller 节点；</li><li>用 OpenStack 的 admin 用户执行命令 <code>nova migrate --poll \<server_id or server_name\></code></li><li>迁移结束后，执行命令 <code>nova resize-revert \<server_id or server_name\></code>。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例开始迁移，状态变化为 Resize/Migrate -> Confirm or Revert Resize/Migrate</li><li>迁移结束后，点击 【Actions】 中的 【Revert Resize/Migrate】 恢复，取消迁移，看到实例回到原本的主机上运行</li></ul></li><li>CLI:<ul><li>迁移命令执行成功，实例迁移到另一台主机上，执行命令 <code>nova show \<server_id or server_name\></code>，看到显示该实例的状态为 resized</li><li>恢复命令执行成功，执行命令 <code>nova show \<server_id or server_name\></code> 看到实例恢复在原来的主机上运行</li></ul></li></ul>|失败，实例 Error，Redmine: #3591||None|
|01050310|将一台主机上的所有实例迁移到其他主机上||||||
|01050311|测试在不同 availability zone 中迁移实例|||||None|
|01050312|测试在同一个 availability zone 中在线迁移实例|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Admin】，展开选项卡；</li><li>点击 【System】 子选项卡，展开；</li><li>点击【Instances】 选项卡；</li><li>选择所要迁移的实例，点击 【Actions】 中的 【Live Migrate Instance】；</li><li>在弹出的 【Live Migrate】 窗口中，选择 New Host，即迁移的目的主机，不勾选 "Disk Over Commit" 和 "Block Migration"；</li><li>点击窗口中的 【Live Migrate Instance】 按钮，开始迁移。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-and-live-migrate.yaml；</li><li>执行测试命令 <code>rally task start boot-and-live-migrate.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例开始迁移，状态变化为 Migrating -> Active</li><li>实例成功迁移到所选择的主机上，业务没有终端，显示 Host 为所选择的目的主机</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||需要修改 flavor name, image name, block_migration, disk_over_commit, **目的主机 -> target_host?**|Rally:</br>boot-and-live-migrate.yaml|
|01050313|测试在不同 availability zone 中在线迁移实例||||||
|01050314|测试停止/启动的操作|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击【Instances】 选项卡；</li><li>选择所要操作的实例，点击 【Actions】 中的 【Shut Off Instance】；</li><li>在弹出的 【Confirm Shut Off Instance】 窗口中，点击 【Shut Off Instance】 按钮；</li><li>实例停止后，点击 【Actions】 中的 【Start Instance】。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-bounce-delete.yaml；</li><li>执行测试命令 <code>rally task start boot-bounce-delete.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例被关闭</li><li>状态变化为 Active -> Shutoff</li><li>任务状态变化为 Powering Off -> None</li><li>点击 【Start Instance】 后，实例被启动，状态变化为 Shutoff -> Active</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||<ul><li>执行 10 次，每次并行执行 2 个测试</li><li>每次测试创建 3 个 tenant，每个 tenant 包含 2 个 user</li><li>每次测试停止/启动 1 次</li></ul>|Rally:</br>boot-bounce-delete_stop_start.yaml|
|01050315|测试硬重启实例的操作|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击【Instances】 选项卡；</li><li>选择所要操作的实例，点击 【Actions】 中的 【Hard Reboot Instance】；</li><li>在弹出的 【Confirm Hard Reboot Instance】 窗口中，点击 【Hard Reboot Instance】 按钮；</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-bounce-delete.yaml；</li><li>执行测试命令 <code>rally task start boot-bounce-delete.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例被硬重启</li><li>实例状态变化为 Hard Reboot -> Active</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||<ul><li>执行 10 次，每次并行执行 2 个测试</li><li>每次测试创建 3 个 tenant，每个 tenant 包含 2 个 user</li><li>每次测试硬重启实例 1 次</li></ul>|Rally:</br>boot-bounce-delete_hard_reboot.yaml|
|01050316|测试软重启实例的操作|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击【Instances】 选项卡；</li><li>选择所要操作的实例，点击 【Actions】 中的 【Soft Reboot Instance】；</li><li>在弹出的 【Confirm Soft Reboot Instance】 窗口中，点击 【Soft Reboot Instance】 按钮；</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-bounce-delete.yaml；</li><li>执行测试命令 <code>rally task start boot-bounce-delete.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例被软重启</li><li>实例的状态变化为 Reboot -> Active</li><li>实例的任务状态变化为 Reboot Started -> None</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||<ul><li>执行 10 次，每次并行执行 2 个测试</li><li>每次测试创建 3 个 tenant，每个 tenant 包含 2 个 user</li><li>每次测试软重启实例 1 次</li></ul>|Rally:</br>boot-bounce-delete_soft_reboot.yaml|
|01050317|测试将实例重启为救援模式，再重启为正常模式||||需要修改 flavor name, image name, actions(是否指的是 Windows 虚拟机？)|Rally:</br>boot-bounce-delete_rescue.yaml|
|01050318|启动一台实例，并在实例中执行脚本||||username 怎么写？|Rally:</br>vm/boot-runcommand-delete.yaml|
|01050319|测试删除一台从卷中启动的实例|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击【Instances】 选项卡，选择一台从卷启动的实例，点击 【Actions】 中的 【Terminate Instance】；</li><li>在弹出的 【Confirm Terminate Instance】 窗口中，点击 【Terminate Instance】 按钮。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-from-volume-and-delete.yaml；</li><li>执行测试命令 <code>rally task start boot-from-volume-and-delete.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例删除成功，有 Success 的信息提示</li><li>实例列表中不再显示该实例的信息</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||<ul><li>执行 10 次，每次并行执行 2 个测试</li><li>卷的大小设置为 10G</li><li>同时执行 "eqlx" 和 "rbd" 类型的卷的测试</li></ul>|Rally:</br>boot-from-volume-and-delete.yaml|
|01050320|在线迁移一台从卷启动的实例|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Admin】，展开选项卡；</li><li>点击 【System】 子选项卡，展开；</li><li>点击【Instances】 选项卡，选择一台从卷启动的实例，点击 【Actions】 中的 【Live Migrate Instance】；</li><li>在弹出的 【Live Migrate】 窗口中，在 New Host 处选择迁移的目的主机，其他保持默认配置，点击窗口下方的 【Live Migrate Instance】 按钮；</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-server-from-volume-and-live-migrate.yaml；</li><li>执行测试命令 <code>rally task start boot-server-from-volume-and-live-migrate.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例在线迁移成功</li><li>实例状态变化为 Migrating -> Active</li><li>实例运行在另一台主机上，显示的 Host 为所选择的目的主机</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||<ul><li>执行 10 次，每次并行执行 2 个测试</li><li>卷的大小设置为 10G</li><li>同时执行 "eqlx" 和 "rbd" 类型的卷的测试</li></ul>|Rally:</br>boot-server-from-volume-and-live-migrate.yaml|
|01050321|在线迁移一台附加了卷的实例|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Volumes】 选项卡，选择一个状态为 "Available" 的卷，点击 【Actions】 中的 【Edit Attachments】；</li><li>在弹出的 【Manage Volume Attachments】 窗口中，点击下拉框选择 Attach to Instance，点击窗口中的 【Attach Volume】 的按钮；</li><li>点击左侧导航栏的 【Admin】，展开选项卡；</li><li>点击 【System】 子选项卡，展开；</li><li>点击 【Instances】 选项，选择将卷所附加的实例，点击 【Actions】 中的 【Live Migrate Instance】；</li><li>在弹出的 【Live Migrate】 窗口中，选择迁移的目的主机 New Host，点击窗口下方的 【Live Migrate Instance】。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-server-attach-created-volume-and-live-migrate.yaml；</li><li>执行测试命令 <code>rally task start boot-server-attach-created-volume-and-live-migrate.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>卷附加成功，状态变化为 Attaching -> In-Use</li><li>实例迁移成功，状态变化为 Migrating -> Active</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||boot_server_kwargs(如 nics)<ul><li>执行 5 次，每次执行 1 个测试</li><li>卷的大小设置为 10G</li><li>每次创建 2 个 tenant，每个 tenant 包含 2 个 user</li><li>同时执行 "eqlx" 和 "rbd" 类型的卷的测试</li></ul>|Rally:</br>boot-server-attach-created-volume-and-live-migrate.yaml|
|01050322|测试重新定义实例大小：小 -> 大|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项，选择一台 Size 为 "m1.tiny" 的实例，点击 【Actions】 中的 【Resize Instance】；</li><li>在弹出的 【Resize Instance】 窗口中，在 Flavor Choice 标签下，选择 New Flavor 为 "m1.small"，其他保持默认配置；</li><li>点击窗口下方的 【Resize】。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 resize-server.yaml；</li><li>执行测试命令 <code>rally task start resize-server.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例大小(flavor)被重新定义，状态变化为 Active -> Resize/Migrate -> Confirm or Revert Resize/Migrate</li><li>需要手动确认，点击 【Actions】 中的 【Confirm Resize/Migrat】，实例的 Size 变为 "m1.small"，状态为 Active</li><li>点击 【Actions】 中的 【Revert Resize/Migrate】，实例的 Size 变回 "m1.tiny"，状态为 Active</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||<ul><li>执行 10 次，每次并行执行 5 个测试</li></ul>|Rally:</br>resize-server_small_to_big.yaml|
|01050323|测试重新定义实例大小：大 -> 小|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项，选择一台 Size 为 "m1.small" 的实例，点击 【Actions】 中的 【Resize Instance】；</li><li>在弹出的 【Resize Instance】 窗口中，在 Flavor Choice 标签下，选择 New Flavor 为 "m1.tiny"，其他保持默认配置；</li><li>点击窗口下方的 【Resize】。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 resize-server.yaml；</li><li>执行测试命令 <code>rally task start resize-server.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>无法将实例大小由大 -> 小，提示错误</li></ul></li><li>CLI:<ul><li>Rally 测试失败</li></ul></li></ul>|Redmine: #3574|<ul><li>执行 10 次，每次并行执行 5 个测试</li></ul>|Rally:</br>resize-server_big_to_small.yaml|
|01050324|测试创建实例的快照|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项，选择一台实例，点击 【Actions】 中的 【Create Snapshot】；</li><li>在弹出的 【Create Snapshot】 窗口中填写 Snapshot Name，点击窗口下方的 【Create Snapshot】。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-snapshot-boot-delete.yaml；</li><li>执行测试命令 <code>rally task start boot-snapshot-boot-delete.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>开始创建快照，界面跳转到 【Images】 选项中</li><li>在右侧的列表中看到新建的快照，快照状态变化为 Queued -> Saving -> Active</li><li>Format 变化为 QCOW2 -> RAM</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，每次并行执行 2 个测试|Rally:</br>boot-snapshot-boot-delete.yaml|
|01050325|创建实例时使用 keypair||||需要修改 flavor name, image name|Rally:</br>boot-and-delete-server-with-keypairs.yaml|
|01050326|创建实例时使用 secgroup||||需要修改 flavor name, image name|Rally:</br>boot-and-delete-server-with-secgroups.yaml|
|01050327|创建实例，pause 后将其恢复|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项卡，在右侧的实例列表中选择一台状态为 "Active" 的实例，点击 【Actions】 中的 【Pause Instance】；</li><li>虚拟机暂停后，点击 【Actions】 中的 【Resume Instance】。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 pause-and-unpause.yaml；</li><li>执行测试命令 <code>rally task start pause-and-unpause.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>点击 【Pause Instance】 后，实例的状态变化为 Active -> Paused，点击到实例的 Console 不能操作实例</li><li>点击 【Resume Instance】 后，实例状态变化为 Paused -> Active，点击到实例的 Console，能够操作实例</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，每次并行执行 2 个测试|Rally:</br>pause-and-unpause.yaml|
|01050328|创建实例，suspend 后将其恢复|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项卡，在右侧的实例列表中选择一台状态为 "Active" 的实例，点击 【Actions】 中的 【Suspend Instance】；</li><li>虚拟机暂停后，点击 【Actions】 中的 【Resume Instance】。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 suspend-and-resume.yaml；</li><li>执行测试命令 <code>rally task start suspend-and-resume.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>点击 【Suspend Instance】实例的状态变化为 Active -> Suspended，无法显示实例的 Console</li><li>点击 【Resume Instance】 后，实例状态变化为 Suspended -> Active，刷新实例的 Console，能够操作实例</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，每次并行执行 2 个测试|Rally:</br>suspend-and-resume.yaml|
|01050329|重新构建实例，所使用的 flavor 较大|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项卡，在右侧的实例列表中选择一台以 "m1.small" 类型启动的实例，点击 【Actions】 中的 【Rebuild Instance】；</li><li>在弹出的 【Rebuild Instance】 窗口中，在 Select Image 处选择一个新的镜像 "ubuntu-14.04-x86_64"，点击窗口下方的 【Rebuild Instance】 按钮。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-and-rebuild.yaml；</li><li>执行测试命令 <code>rally task start boot-and-rebuild.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>重新构建实例成功</li><li>实例以原本的 ID 和网络被重新构建为所选择的镜像的系统</li></ul></li><li>CLI:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 5 次，每次并行执行 2 个测试|Rally:</br>boot-and-rebuild_big.yaml|
|01050330|重新构建实例，所使用的 flavor 较小|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项卡，在右侧的实例列表中选择一台以 "m1.tiny" 类型启动的实例，点击 【Actions】 中的 【Rebuild Instance】；</li><li>在弹出的 【Rebuild Instance】 窗口中，在 Select Image 处选择一个新的镜像 "ubuntu-14.04-x86_64"，点击窗口下方的 【Rebuild Instance】 按钮。</li></ol></li><li>CLI:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-and-rebuild.yaml；</li><li>执行测试命令 <code>rally task start boot-and-rebuild.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>重新构建实例失败</li><li>没有报错信息，但实例未被重新构建</li></ul></li><li>CLI:<ul><li>Rally 测试失败</li></ul></li></ul>||执行 5 次，每次并行执行 2 个测试|Rally:</br>boot-and-rebuild_small.yaml|
||启动实例并为它分配浮动 IP|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项卡；</li><li>点击 【Launch Instance】 按钮；</li><li>在弹出的 【Launch Instance】 窗口中，填写创建实例所需要的信息；</li><li>点击窗口下方的 【Launch】 按钮，启动实例。TODO</li></ol></li><li>Rally:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-and-associate-floating-ip.yam；</li><li>执行测试命令 <code>rally task start boot-and-associate-floating-ip.yam</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例启动成功</li><li>成功为实例分配浮动 IP</li><li>dashboard 上显示所分配的浮动 IP 地址</li></ul></li><li>Rally:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，并行数目为 2|Rally:</br>boot-and-associate-floating-ip.yaml|
||一次启动 N 台实例，然后逐台删除|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项卡；</li><li>点击 【Launch Instance】 按钮；</li><li>在弹出的 【Launch Instance】 窗口中，在 Details 标签下，填写 Instance Name，选择 Flavor 为 m1.tiny；</li><li>选择 Instance Boot Source 为 "Boot from image"，选择 Image Name 为启动的镜像；TODO；</li><li>在 Networking 标签下，为实例选择网络；</li><li>点击窗口下方的 【Launch】 按钮，启动实例。</li></ol></li><li>Rally:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-and-delete-multiple.yaml；</li><li>执行测试命令 <code>rally task start boot-and-delete-multiple.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>成功启动 5 台实例；</li><li>实例以所输入的实例名称为名称前缀，拥有不同的 uuid</li></ul></li><li>Rally:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，并行数目为 2|Rally:</br>boot-and-delete-multiple.yaml|
||启动实例后查看控制台？？|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项卡；</li><li>点击 【Launch Instance】 按钮；</li><li>在弹出的 【Launch Instance】 窗口中，填写创建实例所需要的信息；</li><li>点击窗口下方的 【Launch】 按钮，启动实例。TODO</li></ol></li><li>Rally:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-and-get-console-server.yaml；</li><li>执行测试命令 <code>rally task start boot-and-get-console-server.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例启动成功</li><li>能够查看实例的控制台</li></ul></li><li>Rally:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，并行数目为 2|Rally:</br>boot-and-get-console-server.yaml|
||启动实例后读取实例的详细信息|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项卡；</li><li>点击 【Launch Instance】 按钮；</li><li>在弹出的 【Launch Instance】 窗口中，填写创建实例所需要的信息；</li><li>点击窗口下方的 【Launch】 按钮，启动实例；</li><li>实例启动完成后，点击实例名称，进入详细信息页面。</li></ol></li><li>Rally:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-and-show-server.yaml；</li><li>执行测试命令 <code>rally task start boot-and-show-server.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>成功启动实例</li><li>进入详细信息页面后，可以看到实例的 UUID 等详细信息</li></ul></li><li>Rally:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，并行数目为 2|Rally:</br>boot-and-show-server.yaml|
||从卷启动实例，然后重新定义实例大小|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击【Instances】 选项卡，点击 【Launch Instance】 按钮；</li><li>在弹出的 【Launch Instance】 窗口中，在 Details 标签下，填写 Instance Name，选择 Flavor 为 "m1.tiny"，输入 Instance Count 为 "1"，选择 Instance Boot Source 为 "Boot from volume"，在下方出现的 Volume 中选择卷；</li><li>在 Networking 标签下选择分配的网络后，点击 【Launch】 按钮；</li><li>实例启动成功后，TODO</li></ol></li><li>Rally:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-from-volume-and-resize.yaml；</li><li>执行测试命令 <code>rally task start boot-from-volume-and-resize.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>成功启动实例</li><li>用于启动实例的卷挂载到实例上</li><li>成功将实例重新定义为 "m1.small" 大小</li><li>登录到实例中，执行 <code>df -h</code> 命令可以看到实例的磁盘大小变为 20G</li></ul></li><li>Rally:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，并行数目为 2|Rally:</br>boot-from-volume-and-resize.yaml|
||启动实例，锁定实例后解锁|<ul><li>UI:<ol><li>TODO</li></ol></li><li>Rally:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-lock-unlock-and-delete.yaml；</li><li>执行测试命令 <code>rally task start boot-lock-unlock-and-delete.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>TODO</li></ul></li><li>Rally:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，并行数目为 2|Rally:</br>boot-lock-unlock-and-delete.yaml|
||启动实例，为实例附加卷，然后重新定义实例大小|<ul><li>UI:<ol><li>登录到 dashboard；</li><li>点击左侧导航栏的 【Project】，展开选项卡；</li><li>点击 【Compute】 子选项卡，展开；</li><li>点击 【Instances】 选项卡；</li><li>点击 【Launch Instance】 按钮；</li><li>在弹出的 【Launch Instance】 窗口中，在 Details 标签下，填写 Instance Name，选择 Flavor 为 m1.tiny；</li><li>选择 Instance Boot Source 为 "Boot from image"，选择 Image Name 为启动的镜像；</li><li>实例成功启动后，TODO</li></ol></li><li>Rally:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 boot-server-attach-created-volume-and-resize.yaml；</li><li>执行测试命令 <code>rally task start boot-server-attach-created-volume-and-resize.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>实例成功启动</li><li>成功为实例附加卷，卷的挂载位置为 "/dev/sdb"</li><li>成功将实例重新定义为 "m1.small" 大小</li><li>登录到实例中，执行 <code>df -h </code> 命令可以看到TODO</li></ul></li><li>Rally:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，并行数目为 2|Rally:</br>boot-server-attach-created-volume-and-resize.yaml|
||列出所有的 hypervisor|<ul><li>CLI:<ol><li>TODO</li></ol></li><li>Rally:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 list-hypervisors.yaml；</li><li>执行测试命令 <code>rally task start list-hypervisors.yaml</code> 。</li></ol></li></ul>|<ul><li>CLI:<ul><li>TODO</li></ul></li><li>Rally:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 20 次，并行数目为 2|Rally:</br>list-hypervisors.yaml|
||使用 nova 命令列出镜像|<ul><li>CLI:<ol><li>登录到 Controller 节点；</li><li>加载环境变量脚本后，执行命令 <code>nova image-list</code>。</li></ol></li><li>Rally:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 list-images.yaml；</li><li>执行测试命令 <code>rally task start list-images.yaml</code> 。</li></ol></li></ul>|<ul><li>CLI:<ul><li>使用 nova 命令成功列出镜像列表，列出结果与使用 <code>glance image-list</code> 一致TODO</li></ul></li><li>Rally:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，并行数目为 2|Rally:</br>list-images.yaml|
||测试 shelve 和 unshelve 功能|<ul><li>UI:<ol><li>TODO</li></ol></li><li>Rally:<ol><li>登录到 rally 测试服务器；</li><li>使用 rally 测试文件 shelve-and-unshelve.yaml；</li><li>执行测试命令 <code>rally task start shelve-and-unshelve.yaml</code> 。</li></ol></li></ul>|<ul><li>UI:<ul><li>TODO</li></ul></li><li>Rally:<ul><li>Rally 测试成功</li></ul></li></ul>||执行 10 次，并行数目为 2|Rally:</br>shelve-and-unshelve.yaml|
